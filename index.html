<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Takendra Posts</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
<style>
:root {
  --bg: #0e0f1a;
  --card-bg: #1a1b2a;
  --text: #e0e0e0;
  --muted: #a0a0a0;
  --accent: #7f5af0;
  --shadow: rgba(0,0,0,0.5);
  --radius: 16px;
  --gap: 18px;
}
*{box-sizing:border-box;margin:0;padding:0;}
body{
  font-family:'Inter',sans-serif;
  background: var(--bg);
  color: var(--text);
  min-height:100vh;
  display:flex;
  flex-direction:column;
}
header{
  padding:20px;
  text-align:center;
  font-size:24px;
  font-weight:600;
  background:#13141f;
  box-shadow:0 2px 12px var(--shadow);
}
main.container{
  max-width:1200px;
  margin:20px auto;
  padding:0 16px 40px;
  flex:1;
}
.grid{
  display:grid;
  grid-template-columns:repeat(5,1fr);
  gap: var(--gap);
}
@media(max-width:480px){ .grid{grid-template-columns:1fr} }
@media(min-width:481px) and (max-width:900px){ .grid{grid-template-columns:repeat(3,1fr)} }
@media(min-width:901px) and (max-width:1200px){ .grid{grid-template-columns:repeat(4,1fr)} }

.card{
  background: var(--card-bg);
  border-radius: var(--radius);
  overflow:hidden;
  display:flex;
  flex-direction:column;
  box-shadow:0 4px 20px var(--shadow);
  transition: transform 0.25s ease, box-shadow 0.25s ease;
  cursor:pointer;
  position:relative;
}
.card:hover{
  transform: translateY(-6px) scale(1.02);
  box-shadow:0 10px 30px var(--shadow);
}
.media-wrap{
  position:relative;
  flex:1;
  overflow:hidden;
  display:flex;
  justify-content:center;
  align-items:center;
  background:#0f101f;
}
.card img, .card video{
  width:100%;
  height:100%;
  object-fit:cover;
  display:block;
  border-radius: var(--radius) var(--radius) 0 0;
}
.title{
  padding:12px;
  font-size:14px;
  font-weight:500;
  border-top:1px solid rgba(255,255,255,0.05);
  background: var(--card-bg);
}
.badge{
  position:absolute;
  top:10px;
  right:10px;
  background: var(--accent);
  color:#fff;
  padding:4px 8px;
  border-radius:999px;
  font-size:12px;
  font-weight:600;
  text-transform:uppercase;
}
.play-overlay{
  position:absolute;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%);
  font-size:36px;
  color:#fff;
  opacity:0.8;
  pointer-events:none;
  transition:opacity 0.2s ease;
}
.empty{
  padding:50px;
  text-align:center;
  color: var(--muted);
  font-size:16px;
}
</style>
</head>
<body>
<header>Takendra Feed</header>
<main class="container">
<section class="grid" id="feed">
  <div class="empty" id="emptyState">No posts yet — update posts.json in the GitHub repo.</div>
</section>
</main>

<script>
const feed=document.getElementById('feed');
const emptyState=document.getElementById('emptyState');
const GITHUB_RAW_URL='https://raw.githubusercontent.com/TakendraBam432/takendra-posts/main/posts.json';
let currentPlaying=null;

function createCard({type,url,title}){
  const card=document.createElement('article'); card.className='card';
  const mediaWrap=document.createElement('div'); mediaWrap.className='media-wrap';

  if(type==='video'){
    const video=document.createElement('video');
    video.src=url; video.controls=false; video.setAttribute('playsinline','');
    mediaWrap.appendChild(video);

    const playOverlay=document.createElement('div');
    playOverlay.className='play-overlay';
    playOverlay.innerHTML='►';
    mediaWrap.appendChild(playOverlay);

    mediaWrap.addEventListener('click',()=>{
      if(currentPlaying && currentPlaying!==video) {
        currentPlaying.pause();
        currentPlaying.parentElement.querySelector('.play-overlay').style.opacity=0.8;
      }
      if(video.paused){ video.play(); playOverlay.style.opacity=0; currentPlaying=video; }
      else{ video.pause(); playOverlay.style.opacity=0.8; currentPlaying=null; }
    });

    const badge=document.createElement('span'); badge.className='badge'; badge.innerText='VIDEO'; card.appendChild(badge);
  } else {
    const img=document.createElement('img'); img.src=url; img.alt=title||'Photo';
    mediaWrap.appendChild(img);
    const badge=document.createElement('span'); badge.className='badge'; badge.innerText='PHOTO'; card.appendChild(badge);
  }

  card.appendChild(mediaWrap);
  const t=document.createElement('div'); t.className='title'; t.innerText=title||(type==='video'?'Untitled Video':'Untitled Photo'); card.appendChild(t);

  card.addEventListener('click', e=>{
    if(e.target.tagName!=='VIDEO'){
      const previewWin=window.open('','_blank');
      previewWin.document.write(`<html><head><title>${title||''}</title></head><body style="margin:0;display:flex;justify-content:center;align-items:center;background:#000">`);
      if(type==='video'){ previewWin.document.write(`<video src="${url}" controls autoplay style="max-width:100%;max-height:100%;border-radius:12px"></video>`);}
      else{ previewWin.document.write(`<img src="${url}" style="max-width:100%;max-height:100%;object-fit:contain;border-radius:12px"/>`);}
      previewWin.document.write('</body></html>'); previewWin.document.close();
    }
  });

  return card;
}

function checkEmpty(){ emptyState.style.display=feed.children.length>1?'none':'block'; }

async function loadPosts(){
  try{
    const res=await fetch(GITHUB_RAW_URL);
    const text=await res.text();
    const posts=JSON.parse(text);
    posts.forEach(p=>feed.appendChild(createCard(p)));
    checkEmpty();
  } catch(err){ console.error('Failed to fetch posts:', err); }
}

window.addEventListener('load', loadPosts);
</script>
</body>
</html>
